<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrickBracker — Java project demo</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>BrickBracker — Java project demo</h1>
    <p>This page demonstrates how Java is used in the project and includes a small HTML5 port so you can demo the game directly in a browser.</p>
  </header>

  <section id="how-java-used">
    <h2>How Java is used</h2>
    <ul>
      <li><code>Main.java</code> — sets up the Swing window and attaches <code>Gameplay</code>.</li>
      <li><code>Gameplay.java</code> — main game loop, input handling, collision detection, drawing using Swing's Graphics.</li>
      <li><code>MapGenerator.java</code> — simple class that defines the brick layout and draws bricks.</li>
    </ul>

    <h3>Compile and run (Windows PowerShell)</h3>
    <p>Open a PowerShell terminal in the project folder (<code>c:\Users\&lt;you&gt;\Desktop\brickBracker\brickBracker</code>) and run:</p>
    <pre><code>javac *.java
java brickBracker.Main</code></pre>
    <p>To create an executable JAR:</p>
    <pre><code>javac *.java
jar cfe BrickBracker.jar brickBracker.Main *.class
java -jar BrickBracker.jar</code></pre>

    <p>Note: Modern browsers do not support running Swing/Java applets directly. The instructions above run the original Java program on your machine (showing how Java is used).</p>
  </section>

  <section id="play-port">
    <h2>Play (HTML5 port)</h2>
    <p>Use arrow keys to move the paddle (Left/Right). Press Enter to restart.</p>
    <button id="toggleCanvas">Show / Hide Game</button>
    <div id="gameWrap" style="display:none">
      <canvas id="gameCanvas" width="692" height="592"></canvas>
    </div>
  </section>

  <section id="sources">
    <h2>Java source (project files)</h2>

  <h3>Main.java</h3>
  <pre><code id="src-main">package brickBracker;

import javax.swing.JFrame;

public class Main {

  public static void main(String[] args) {
    JFrame obj = new JFrame();
    Gameplay gameplay = new Gameplay();

    obj.setBounds(10, 10, 700, 600);
    obj.setTitle("Brick Breaker");
    obj.setResizable(false);
    obj.setVisible(true);
    obj.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    obj.add(gameplay);
  }
}
</code></pre>

  <h3>Gameplay.java</h3>
  <pre><code id="src-gameplay">package brickBracker;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JPanel;
import javax.swing.Timer;

public class Gameplay extends JPanel implements KeyListener, ActionListener {
  private boolean play = false;
  private int score = 0;
  private final int TOTAL_BRICKS = 21;
  private int totalBricks = TOTAL_BRICKS;

  private final Timer timer;
  private final int delay = 8;

  private int playerX = 310;

  private int ballposX = 120;
  private int ballposY = 350;
  private int ballXdir = -1;
  private int ballYdir = -2;

  private MapGenerator map;

  public Gameplay() {
    map = new MapGenerator(3, 7);
    timer = new Timer(delay, this);
    setFocusable(true);
    setFocusTraversalKeysEnabled(false);
    timer.start();
    addKeyListener(this);
  }

  @Override
  public void paintComponent(Graphics g) {
    super.paintComponent(g);

    // background
    g.setColor(Color.black);
    g.fillRect(1, 1, 692, 592);

    // draw map
    map.draw((Graphics2D)g);

    // borders
    g.setColor(Color.yellow);
    g.fillRect(0, 0, 3, 592);
    g.fillRect(0, 0, 692, 3);
    g.fillRect(691, 0, 3, 592);

    // paddle
    g.setColor(Color.green);
    g.fillRect(playerX, 550, 100, 8);

    // ball
    g.setColor(Color.yellow);
    g.fillOval(ballposX, ballposY, 20, 20);

    // score
    g.setColor(Color.white);
    g.setFont(new Font("serif", Font.BOLD, 25));
    g.drawString("" + score, 590, 30);

    // win condition
    if(totalBricks <= 0) {
      play = false;
      ballXdir = 0;
      ballYdir = 0;
      g.setColor(Color.green);
      g.setFont(new Font("serif", Font.BOLD, 30));
      g.drawString("You Won! Score: " + score, 190, 300);
            
      g.setFont(new Font("serif", Font.BOLD, 20));
      g.drawString("Press Enter to Restart", 230, 350);
    }
        
    // lose condition
    if(ballposY > 570) {
      play = false;
      ballXdir = 0;
      ballYdir = 0;
      g.setColor(Color.red);
      g.setFont(new Font("serif", Font.BOLD, 30));
      g.drawString("Game Over! Score: " + score, 190, 300);
            
      g.setFont(new Font("serif", Font.BOLD, 20));
      g.drawString("Press Enter to Restart", 230, 350);
    }
  }

  @Override
  public void actionPerformed(ActionEvent e) {
    timer.start();

    if (play) {
      ballposX += ballXdir;
      ballposY += ballYdir;

      // left border
      if (ballposX < 0) {
        ballXdir = -ballXdir;
      }

      // top border
      if (ballposY < 0) {
        ballYdir = -ballYdir;
      }

      // right border
      if (ballposX > 670) {
        ballXdir = -ballXdir;
      }

      // paddle collision
      if (new Rectangle(ballposX, ballposY, 20, 20)
          .intersects(new Rectangle(playerX, 550, 100, 8))) {
        ballYdir = -ballYdir;
      }

      // brick collision
      A: for(int i = 0; i < map.map.length; i++) {
        for(int j = 0; j < map.map[0].length; j++) {
          if(map.map[i][j] > 0) {
            int brickX = j * map.brickWidth + 80;
            int brickY = i * map.brickHeight + 50;
            int brickWidth = map.brickWidth;
            int brickHeight = map.brickHeight;

            Rectangle rect = new Rectangle(brickX, brickY, brickWidth, brickHeight);
            Rectangle ballRect = new Rectangle(ballposX, ballposY, 20, 20);

            if(ballRect.intersects(rect)) {
              map.setBrickValue(0, i, j);
              totalBricks--;
              score += 5;

              if(ballposX + 19 <= rect.x || ballposX + 1 >= rect.x + rect.width) {
                ballXdir = -ballXdir;
              } else {
                ballYdir = -ballYdir;
              }
              break A;
            }
          }
        }
      }

      repaint();
    }
  }

  @Override
  public void keyTyped(KeyEvent e) {}
  @Override
  public void keyReleased(KeyEvent e) {}

  @Override
  public void keyPressed(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
      if (playerX >= 600) {
        playerX = 600;
      } else {
        moveRight();
      }
    }
    if (e.getKeyCode() == KeyEvent.VK_LEFT) {
      if (playerX <= 10) {
        playerX = 10;
      } else {
        moveLeft();
      }
    }
    if (e.getKeyCode() == KeyEvent.VK_ENTER) {
      if (!play) {
        play = true;
        ballposX = 120;
        ballposY = 350;
        ballXdir = -1;
        ballYdir = -2;
        playerX = 310;
        score = 0;
        totalBricks = TOTAL_BRICKS;
        map = new MapGenerator(3, 7);

        repaint();
      }
    }
  }

  public void moveRight() {
    play = true;
    playerX += 20;
  }

  public void moveLeft() {
    play = true;
    playerX -= 20;
  }
}
</code></pre>

  <h3>MapGenerator.java</h3>
  <pre><code id="src-map">package brickBracker;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics2D;

public class MapGenerator {
  public int[][] map;
  public int brickWidth;
  public int brickHeight;

  public MapGenerator(int row, int col) {
    map = new int[row][col];
    for (int i = 0; i < map.length; i++) {
      for (int j = 0; j < map[0].length; j++) {
        map[i][j] = 1; // 1 = visible brick
      }
    }

    brickWidth = 540 / col;
    brickHeight = 150 / row;
  }

  public void draw(Graphics2D g) {
    for (int i = 0; i < map.length; i++) {
      for (int j = 0; j < map[0].length; j++) {
        if (map[i][j] > 0) {
          g.setColor(Color.white);
          g.fillRect(j * brickWidth + 80, i * brickHeight + 50, brickWidth, brickHeight);

          // Brick border
          g.setStroke(new BasicStroke(3));
          g.setColor(Color.black);
          g.drawRect(j * brickWidth + 80, i * brickHeight + 50, brickWidth, brickHeight);
        }
      }
    }
  }

  public void setBrickValue(int value, int row, int col) {
    map[row][col] = value;
  }
}
</code></pre>
  </section>

  <footer>
    <p>Created to demonstrate Java usage in a school project. The Java source above is the exact source from the project.</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>